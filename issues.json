[{"body":"# Admin: Pending Cocktail Approval Queue (approve/reject)\n\nAdd an admin approval workflow for user-submitted cocktails (those created with `IsApproved = 0`).\n\nThis can be implemented after 3A; until then, approvals may be performed manually (script/SQL).\n\n---\n\n## Requirements\n\n- Admin view lists pending cocktails (`IsApproved = 0`).\n- Admin can:\n  - Approve (sets `IsApproved = 1`)\n  - Reject (either delete OR keep with `IsApproved = 0` and a rejection note; decision TBD)\n  - Optionally edit before approving\n\n---\n\n## Acceptance Criteria\n\n- Pending list visible only to admins.\n- Approve changes visibility immediately.\n- Reject path is clear and leaves system in consistent state.\n\n---\n\n## Labels\n\n- `P2 - Medium`\n- `Scope: Nice-to-Have` (or `Scope: MVP` if you want it soon)\n- `Type: UX`\n- `Type: Enhancement`","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvbPw","name":"Type: UX","description":"","color":"631ab7"},{"id":"LA_kwDOMSKbs88AAAACZQvkEQ","name":"P2 - Medium","description":"","color":"2b72db"},{"id":"LA_kwDOMSKbs88AAAACZQvz6A","name":"Scope: Nice-to-Have","description":"","color":"f4022d"},{"id":"LA_kwDOMSKbs88AAAACZQyO_w","name":"Type: Enhancement","description":"","color":"cf7519"}],"number":55,"state":"OPEN","title":"Admin: Pending Cocktail Approval Queue (approve/reject)"},{"body":"We need an **Advanced Filters** UI pattern similar to shopping sites (Amazon sidebar), but **collapsed by default** so the main page stays clean.\n\nThe existing basic filters on the main page are correct and should NOT be expanded further. Any additional filtering logic belongs in this advanced pane.\n\nThis ticket is primarily about the collapsible pane setup and full reset behavior.\n\n---\n\n## Goals (MVP)\n\n- Add an **Advanced Filters** pane that:\n  - Slides in from the LEFT\n  - Is collapsed by default\n  - Does not clutter the main cocktail list UI\n- Provide a prominent **Reset All** action that resets ALL filters (basic + advanced).\n\n---\n\n## UI / UX Requirements\n\n### Entry Point\n- Add an **“Advanced Filters”** button near existing filter controls.\n- Clicking opens a LEFT-side drawer/pane.\n- Drawer overlays or shifts content depending on layout (implementation choice).\n\n### Pane Behavior\n- Closed by default.\n- Slide-in from LEFT.\n- Closing the pane does NOT clear filters.\n- Works cleanly on mobile (slide-over) and desktop.\n\n### Reset Behavior\n- Include a clear **Reset All Filters** action inside the pane.\n- Reset All must:\n  - Clear ALL filters (basic + advanced)\n  - Restore global defaults (e.g., Popular-only default ON)\n  - Refresh results immediately\n\n---\n\n## Advanced Filter Groups (inside pane)\n\nThese filters will live inside the Advanced pane:\n\n- **My**\n  - e.g., My Submissions / My Approved (definition TBD)\n- **Cocktail Time Periods**\n- **Source**\n- **Flavor Profile**\n- **Ingredients**\n  - Show top ~15 most popular ingredients initially\n  - Include **“See more”** expansion to reveal full list\n  - Expansion should be inline (Amazon-style)\n\nNotes:\n- Ingredient list must be performant.\n- Do not render thousands of checkboxes immediately.\n- Advanced filters should integrate cleanly with existing filter pipeline.\n\n---\n\n## Functional Requirements\n\n- Add a structured “advanced filter state” model separate from basic filters.\n- Merge basic + advanced filter state into a single query pipeline.\n- Maintain consistent persistence behavior with existing filter logic.\n\n---\n\n## Acceptance Criteria\n\n- Advanced Filters button opens LEFT-side drawer.\n- Drawer is collapsed by default.\n- Reset All clears ALL filters and restores default state.\n- Placeholder sections exist for each advanced filter group.\n- Mobile + desktop layouts function correctly.\n- Main cocktail list remains visually uncluttered.\n\n---\n\n## Labels\n\n- `P2 - Medium`\n- `Scope: Nice-to-Have`\n- `Type: UX`\n- `Type: Enhancement`","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvbPw","name":"Type: UX","description":"","color":"631ab7"},{"id":"LA_kwDOMSKbs88AAAACZQvkEQ","name":"P2 - Medium","description":"","color":"2b72db"},{"id":"LA_kwDOMSKbs88AAAACZQvz6A","name":"Scope: Nice-to-Have","description":"","color":"f4022d"},{"id":"LA_kwDOMSKbs88AAAACZQyO_w","name":"Type: Enhancement","description":"","color":"cf7519"}],"number":54,"state":"OPEN","title":"Add Left-Side Collapsible Advanced Filters Pane (Amazon-style) with Reset All"},{"body":"# User Add Cocktail: Paste → Review → Submit (auto-create ingredients, pending by default)\n\nReplace/supplement the existing row-by-row Add Cocktail experience with a paste-first workflow:\n**Paste recipe text → Review parsed fields → Submit**\n\nThis must automatically match ingredients and insert new ingredients when missing.\n\nAnti-spam baseline: user submissions should be created as **pending** by default (not publicly visible).\n\n---\n\n## Goals (MVP)\n\n- Paste-first add cocktail flow (fast entry).\n- Keyword-driven format for reliable parsing.\n- “Review” step shows parsed fields + validation.\n- Auto-create missing ingredients on submit.\n- Submitting user can see their pending cocktails.\n\n---\n\n## Data / Visibility\n\n- Add `IsApproved INTEGER NOT NULL DEFAULT 0` to Cocktails.\n- Public lists/search show only `IsApproved = 1`.\n- Submitting user can view their own pending cocktails (`IsApproved = 0`) labeled **Pending approval**.\n\nAdmin-created/imported cocktails will set `IsApproved = 1` (handled in admin issue).\n\n---\n\n## Required Paste Format\n\nRequired headers (case-insensitive, must match words exactly):\n- `Name:`\n- `Description:`\n- `Ingredients:`\n- `Steps:`\n\nOptional:\n- `Flavor Profile:`\n- `Time Period:` (must match an existing time period name exactly OR user selects it during review)\n\n---\n\n## UI Requirements (User)\n\n- Add a “Paste Recipe” mode in Add Cocktail (make it the preferred/default path).\n- Flow:\n  1) Paste into textarea\n  2) Click **Review**\n  3) Show preview:\n     - Name/Description\n     - Ingredient list (highlight NEW ingredients)\n     - Steps list\n     - Time Period (if provided) + validation errors\n  4) Click **Submit**\n- After submit: show confirmation “Submitted for approval”.\n- Provide a way to view “My pending cocktails” (can be within existing My area or a small section/tab).\n- Optional: cache last draft locally to avoid losing pasted text.\n\n---\n\n## API / Backend Requirements\n\n- Add preview endpoint (no DB writes):\n  - `POST /api/cocktails/preview-from-text`\n- Add submit endpoint (DB write):\n  - `POST /api/cocktails/submit-from-text`\n  - sets `IsApproved = 0`\n  - matches ingredients; inserts missing ingredients; creates cocktail + steps + cocktail-ingredients\n- Fix bug: current add cocktail errors when adding new ingredients.\n\n---\n\n## Acceptance Criteria\n\n- User can paste a recipe with required headers and submit successfully.\n- Review step shows parsed fields and clear validation messages.\n- NEW ingredients are detected and created on submit.\n- Submitted cocktails are not visible publicly until approved.\n- Submitting user can view their pending cocktails.\n- New-ingredient error is resolved.\n- Public endpoints filter out unapproved cocktails for non-admins.\n\n---\n\n## Labels\n\n- `P1 - High`\n- `Scope: MVP`\n- `Type: Core Feature`\n- `Type: UX`","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvARA","name":"Type: Core Feature","description":"","color":"9c6b56"},{"id":"LA_kwDOMSKbs88AAAACZQvGwA","name":"Scope: MVP","description":"","color":"96f25c"},{"id":"LA_kwDOMSKbs88AAAACZQvRrg","name":"P1- High","description":"","color":"280844"},{"id":"LA_kwDOMSKbs88AAAACZQvbPw","name":"Type: UX","description":"","color":"631ab7"}],"number":53,"state":"OPEN","title":"Improve “User Add Cocktail” to Paste → Review → Save + Admin Approval (anti-spam)"},{"body":"We need an Admin area to manage cocktails at scale (create/edit/delete/import/export) so we can grow to hundreds/1000+ recipes without painful manual entry. The app already has an internal login system (no external auth provider). For MVP, admin access can be restricted to a single account (Seth).\n\nThis issue also introduces a stable cross-database identifier (`CanonicalKey`) to allow safe syncing between staging and production environments.\n\n---\n\n## Goals (MVP)\n\n- Add a secured `/admin` page for managing cocktails.\n- Support:\n  - Create / Edit / Delete cocktails\n  - Free-text recipe entry (admin-friendly)\n  - JSON import (bulk)\n  - JSON export (single or all)\n- Introduce a `CanonicalKey` column to support cross-database matching.\n\n---\n\n## Data Model Changes\n\n### Add `CanonicalKey` column\n\n- Add a new column: `CanonicalKey TEXT NOT NULL UNIQUE`\n- CanonicalKey must:\n  - Be deterministic\n  - Be stable across environments\n  - Be unique\n\nSuggested format (normalized):\n```\n<normalized_source>::<normalized_cocktail_name>\n```\n\nExample:\n```\naliza_imports::old_fashioned\n```\n\nNormalization rules (to be defined in implementation):\n- lowercase\n- trim\n- replace spaces with `_`\n- remove punctuation\n- collapse duplicates\n\n---\n\n## Matching Rules for Import\n\nWhen importing JSON:\n\n1. If `CocktailId` exists and matches a record in this DB → update by ID.\n2. Else if `CanonicalKey` matches a record → update by CanonicalKey.\n3. Else → create new cocktail.\n\nThis allows:\n- Safe round-trip within same DB (via ID)\n- Safe cross-DB sync (via CanonicalKey)\n\n---\n\n## Access Control\n\n- Add `/admin` route in Vue app.\n- Restrict access to admin users (initially primary admin account).\n- All admin API endpoints must be server-side protected.\n\n---\n\n## Admin UI Requirements\n\n### Cocktail Management\n- Search/list cocktails (name + source filter minimum).\n- Create new cocktail.\n- Edit existing cocktail.\n- Delete cocktail.\n\n### Free-Text Entry Mode\n- Admin can paste/type full recipe text.\n- Admin manually maps structured fields (ingredients, method, tags, etc.).\n- No OCR/API integration in this issue.\n\n---\n\n## JSON Import Requirements\n\n- Admin can upload/import JSON containing multiple cocktails.\n- Import supports both create + update.\n- Must validate before commit.\n- Provide summary: created / updated / failed.\n- Provide per-item error detail.\n- Must run in transaction (per batch or per item, defined in implementation).\n\n---\n\n## JSON Export Requirements\n\n- Export single cocktail (by ID).\n- Export all cocktails (optionally filtered by Source).\n- Exported JSON must round-trip with import.\n- Export must include:\n  - CocktailId\n  - CanonicalKey\n  - All core cocktail fields\n  - IsPopular flag\n\n---\n\n## Acceptance Criteria\n\n- `/admin` exists and is protected.\n- CanonicalKey column exists and is unique.\n- Admin UI can create/edit/delete cocktails.\n- JSON import supports update by ID or CanonicalKey.\n- JSON export round-trips cleanly.\n- All admin endpoints protected server-side.\n\n---\n\n## Labels\n\n- `P1 - High`\n- `Scope: MVP`\n- `Type: Core Feature`\n- `Type: Architecture`","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvARA","name":"Type: Core Feature","description":"","color":"9c6b56"},{"id":"LA_kwDOMSKbs88AAAACZQvGwA","name":"Scope: MVP","description":"","color":"96f25c"},{"id":"LA_kwDOMSKbs88AAAACZQvMYw","name":"Type: Architecture","description":"","color":"521650"},{"id":"LA_kwDOMSKbs88AAAACZQvRrg","name":"P1- High","description":"","color":"280844"}],"number":52,"state":"OPEN","title":"Add `/admin` for cocktail CRUD + JSON import/export + CanonicalKey support"},{"body":"# Add `IsPopular` flag + “Popular” pill + global “Popular only” filter (default ON)\n\nWe need a “widely known / you’ve probably heard of this” indicator based on the source book’s asterisk. This is **not** the CocktailTimePeriods “Classic/Vintage/Modern” concept.\n\n---\n\n## Requirements\n\n- Add a new boolean column to cocktails: `IsPopular` (default `false`).\n- Update API/DTOs to include `IsPopular`.\n- In cocktail list rows/cards, display a **“Popular”** pill when `IsPopular = true`.\n- Add a filter toggle labeled **“Popular only”** (similar to the existing “Virgin only” toggle).\n- Filter + pill must work in both list experiences:\n  - **Show All Cocktails**\n  - **What Can I Drink / What I Can Make**\n- **Global behavior:**\n  - “Popular only” is **ON by default**.\n  - It remains ON across navigation and refresh (persist preference in local storage or equivalent).\n\n---\n\n## Acceptance Criteria\n\n- Database updated with `IsPopular` column.\n- Existing SQL scripts remain re-entrant.\n- Both list views show the “Popular” pill correctly.\n- Both list views filter correctly when toggled.\n- Default state is ON globally.\n- User preference persists after toggle change.\n\n---\n\n## Labels\n\n- `P1 - High`\n- `Scope: MVP`\n- `Type: Core Feature`\n\n\nHere is the list of popular cocktails to mark as such:\nAviation\n\nGimlet\n\nGin and Tonic\n\nMartini\n\nNegroni\n\nTom Collins\n\nBoulevardier\n\nManhattan\n\nSazerac\n\nWhiskey Sour\n\nVieux Carré\n\nHot Toddy\n\nMint Julep\n\nOld Fashioned\n\nBlood and Sand\n\nPenicillin\n\nDaiquiri\n\nDark and Stormy\n\nMojito\n\nBloody Mary\n\nCosmopolitan\n\nMoscow Mule\n\nVodka Martini\n\nMargarita\n\nPaloma\n\nAperol Spritz\n\nChampagne Cocktail\n\nFrench 75\n\nMimosa","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvARA","name":"Type: Core Feature","description":"","color":"9c6b56"},{"id":"LA_kwDOMSKbs88AAAACZQvGwA","name":"Scope: MVP","description":"","color":"96f25c"},{"id":"LA_kwDOMSKbs88AAAACZQvRrg","name":"P1- High","description":"","color":"280844"}],"number":51,"state":"OPEN","title":"Add IsPopular flag + “Popular” pill + global “Popular only” filter (default ON)"},{"body":"Description:\n\n- Improve exclusion of previously logged cocktails.\n- Option:\n   - “Exclude cocktails I’ve had in last X days.”\n- Improve randomness weighting (optional later).\n\nPriority: Medium-High","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvRrg","name":"P1- High","description":"","color":"280844"},{"id":"LA_kwDOMSKbs88AAAACZQvbPw","name":"Type: UX","description":"","color":"631ab7"},{"id":"LA_kwDOMSKbs88AAAACZQvoSw","name":"Scope: Post-MVP","description":"","color":"f57cbb"}],"number":44,"state":"OPEN","title":"Improve “Surprise Me” & Decision Flow"},{"body":"Description:\n\n- Add IsNonAlcoholic flag (or derive from ingredients).\n- Allow filter:\n   - Alcoholic only\n   - Non-alcoholic only\n   - All\n- Ensure filtering works with ingredient selection.\n\nPriority: High (but after ingredient filtering).","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvARA","name":"Type: Core Feature","description":"","color":"9c6b56"},{"id":"LA_kwDOMSKbs88AAAACZQvGwA","name":"Scope: MVP","description":"","color":"96f25c"},{"id":"LA_kwDOMSKbs88AAAACZQvRrg","name":"P1- High","description":"","color":"280844"}],"number":43,"state":"OPEN","title":"Support Non-Alcoholic Cocktails & Filtering"},{"body":"Add a Novice Mode...and create tooltips for common mixology terms, phrases, glass types  etc.\n\nThese tooltips could only be available in NOVICE mode.\n\nAlso, could I have longer form training text.  And what about the mixology tools.","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvbPw","name":"Type: UX","description":"","color":"631ab7"},{"id":"LA_kwDOMSKbs88AAAACZQvuiA","name":"P3 - Low","description":"","color":"bbab05"},{"id":"LA_kwDOMSKbs88AAAACZQvz6A","name":"Scope: Nice-to-Have","description":"","color":"f4022d"}],"number":41,"state":"OPEN","title":"Add a Novice Mode...and create tooltips for common mixology terms, phrases, glass types  etc."},{"body":"- Define canonical ingredient names.\n- Map variations (e.g., Bourbon → Whiskey → Spirit).\n- Ensure ingredient filtering works reliably.\n- Future-proof for substitution logic.\n\nCome up with a strategy for mapping\\handling the general terms for spirits and ingredients into specific types...\n\nSo recipes right now call for whiskey.  But whiskey can mean,.,,\n- Canadian Whiskey\n- Scotch\n- Bourbon\n- Tennessee Whiskey\n- Japanese Whiskey\n- Rye Whiskey\nThis mapping could even apply to specific brands...so instead of Gin\n\n- Hendricks\n- Bombay Saphire\n\nRums can be\n- White Rum\n- Spiced Rum\n- etc\n\nThe dilemma is that limiting to specific whiskeys/gins etc reduces your ingredients match and shows you fewer recipes.","labels":[{"id":"LA_kwDOMSKbs88AAAACZQu8tQ","name":"P0 - Critical","description":"","color":"fb2053"},{"id":"LA_kwDOMSKbs88AAAACZQvGwA","name":"Scope: MVP","description":"","color":"96f25c"},{"id":"LA_kwDOMSKbs88AAAACZQvMYw","name":"Type: Architecture","description":"","color":"521650"}],"number":40,"state":"OPEN","title":"Ingredient Canonicalization & Matching Strategy"},{"body":"GROUPING FOR:\n\n- Favorites\n- Party lists\n- Thematic lists\n- etc\n\nSo right now there was already an idea for \"linking\" the same drinks from different sources.  These recipes will almost always be different.  So you have 2 Gin and Tonics, one from source 1 and another from source 2.  So, this would allow for the display of multiple recipes of the same type (either on the same page or maybe with tabs) and you could also filter by this.\n\nBut it occurred to me that it would be nice to group cocktails together for any reason.  You should be able to create your own groupings like \"Favorites\" or \"Rye Whiskey Only\" or \"2026 Superbowl Party\" (drinks you will be making at the party).  \n\nOf course needs to be easy to add recipes to groups and then view or filter by them.","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvARA","name":"Type: Core Feature","description":"","color":"9c6b56"},{"id":"LA_kwDOMSKbs88AAAACZQvkEQ","name":"P2 - Medium","description":"","color":"2b72db"},{"id":"LA_kwDOMSKbs88AAAACZQvoSw","name":"Scope: Post-MVP","description":"","color":"f57cbb"}],"number":39,"state":"OPEN","title":"Cocktail Grouping Strategy"},{"body":"- Store quantities as decimal in DB.\n- Preserve original display string.\n- Normalize Unicode fractions.\n- Support scaling later.\n\nIs it really necessary to use a lookup table for the amounts.  I know I would consistently like to display...\n¼ (U+00BC)\n½ (U+00BD)\n¾ (U+00BE)\n⅓ (U+2153)\n⅔ (U+2154)\n⅛ (U+215B)\nBut maybe there is a way to use fuzzy logic to lookup a correct value based on whatever is stored with the cocktail.  \nShould the cocktail just always store a decimal and return a unicode value?","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvGwA","name":"Scope: MVP","description":"","color":"96f25c"},{"id":"LA_kwDOMSKbs88AAAACZQvMYw","name":"Type: Architecture","description":"","color":"521650"},{"id":"LA_kwDOMSKbs88AAAACZQvRrg","name":"P1- High","description":"","color":"280844"}],"number":38,"state":"OPEN","title":"Amount Handling Strategy"},{"body":"Improve this so that it is smarter and uses fuzzy logic and allows parsing of a long string into all the requisite fields.","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvkEQ","name":"P2 - Medium","description":"","color":"2b72db"},{"id":"LA_kwDOMSKbs88AAAACZQvoSw","name":"Scope: Post-MVP","description":"","color":"f57cbb"},{"id":"LA_kwDOMSKbs88AAAACZQyO_w","name":"Type: Enhancement","description":"","color":"cf7519"}],"number":37,"state":"OPEN","title":"Add your own cocktails part 2."},{"body":"Write now the ingredients listed with a cocktail show something like this...\n\nBourbon (0.75 oz)\nAperol (0.75 oz)\nAmaro Nonino (0.75 oz)\nFreshly-squeezed lemon juice (0.75 oz)\n\nI want to change that to use the the characters like this...\n\n½ fl oz Maraschino liqueur\n¼ fl oz Crémé de violette\n¾ fl oz Freshly-squeezed lemon juice\n\nSo unicode chars like these...\n¼ (U+00BC)\n½ (U+00BD)\n¾ (U+00BE)\n⅓ (U+2153)\n⅔ (U+2154)\n⅛ (U+215B)","labels":[{"id":"LA_kwDOMSKbs88AAAACZQvbPw","name":"Type: UX","description":"","color":"631ab7"},{"id":"LA_kwDOMSKbs88AAAACZQvkEQ","name":"P2 - Medium","description":"","color":"2b72db"},{"id":"LA_kwDOMSKbs88AAAACZQvoSw","name":"Scope: Post-MVP","description":"","color":"f57cbb"}],"number":36,"state":"OPEN","title":"Change amount display from decimal points to ascii 3/4 1/2 etc."}]
